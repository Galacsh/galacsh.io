2:I[9573,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],"Popover"]
3:I[9573,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],"PopoverTrigger"]
5:I[9573,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],"PopoverContent"]
6:I[6431,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],"RelatedPosts"]
7:I[7506,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],"OnThisPage"]
d:I[2397,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],"CopyToClipboard"]
e:I[231,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","485","static/chunks/485-e3d6989886cf974d.js","49","static/chunks/app/posts/%5B...slug%5D/page-840aa5ce1c8e408c.js"],""]
1b:I[9275,[],""]
1d:I[1343,[],""]
1e:I[9512,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","728","static/chunks/728-fdd2fa7491084b53.js","173","static/chunks/173-4bf88eb97c7f1005.js","785","static/chunks/785-4d2ab731cb76c5e6.js","185","static/chunks/app/layout-315e8e6b3845722a.js"],"ThemeProvider"]
1f:I[6390,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","728","static/chunks/728-fdd2fa7491084b53.js","173","static/chunks/173-4bf88eb97c7f1005.js","785","static/chunks/785-4d2ab731cb76c5e6.js","185","static/chunks/app/layout-315e8e6b3845722a.js"],"AppHeader"]
20:I[7744,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","728","static/chunks/728-fdd2fa7491084b53.js","173","static/chunks/173-4bf88eb97c7f1005.js","785","static/chunks/785-4d2ab731cb76c5e6.js","185","static/chunks/app/layout-315e8e6b3845722a.js"],"Toaster"]
21:I[8344,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","728","static/chunks/728-fdd2fa7491084b53.js","173","static/chunks/173-4bf88eb97c7f1005.js","785","static/chunks/785-4d2ab731cb76c5e6.js","185","static/chunks/app/layout-315e8e6b3845722a.js"],"QuickScrollButton"]
22:I[4404,["310","static/chunks/0e5ce63c-02f114d1bbe31cfb.js","231","static/chunks/231-f46b1491e6d59404.js","279","static/chunks/279-f2458dc959543f2c.js","728","static/chunks/728-fdd2fa7491084b53.js","173","static/chunks/173-4bf88eb97c7f1005.js","785","static/chunks/785-4d2ab731cb76c5e6.js","185","static/chunks/app/layout-315e8e6b3845722a.js"],"GoogleAnalytics"]
4:T423,M7.75432 0.819537C7.59742 0.726821 7.4025 0.726821 7.24559 0.819537L1.74559 4.06954C1.59336 4.15949 1.49996 4.32317 1.49996 4.5C1.49996 4.67683 1.59336 4.84051 1.74559 4.93046L7.24559 8.18046C7.4025 8.27318 7.59742 8.27318 7.75432 8.18046L13.2543 4.93046C13.4066 4.84051 13.5 4.67683 13.5 4.5C13.5 4.32317 13.4066 4.15949 13.2543 4.06954L7.75432 0.819537ZM7.49996 7.16923L2.9828 4.5L7.49996 1.83077L12.0171 4.5L7.49996 7.16923ZM1.5695 7.49564C1.70998 7.2579 2.01659 7.17906 2.25432 7.31954L7.49996 10.4192L12.7456 7.31954C12.9833 7.17906 13.2899 7.2579 13.4304 7.49564C13.5709 7.73337 13.4921 8.03998 13.2543 8.18046L7.75432 11.4305C7.59742 11.5232 7.4025 11.5232 7.24559 11.4305L1.74559 8.18046C1.50786 8.03998 1.42901 7.73337 1.5695 7.49564ZM1.56949 10.4956C1.70998 10.2579 2.01658 10.1791 2.25432 10.3195L7.49996 13.4192L12.7456 10.3195C12.9833 10.1791 13.2899 10.2579 13.4304 10.4956C13.5709 10.7334 13.4921 11.04 13.2543 11.1805L7.75432 14.4305C7.59742 14.5232 7.4025 14.5232 7.24559 14.4305L1.74559 11.1805C1.50785 11.04 1.42901 10.7334 1.56949 10.4956Zb:["projects","nginx-certbot"]
a:{"full":"projects/nginx-certbot","arr":"$b"}
9:{"title":"nginx & Certbot","slug":"$a"}
8:["$9"]
c:T79b,M4.5 1C4.77614 1 5 1.22386 5 1.5V2H10V1.5C10 1.22386 10.2239 1 10.5 1C10.7761 1 11 1.22386 11 1.5V2H12.5C13.3284 2 14 2.67157 14 3.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V3.5C1 2.67157 1.67157 2 2.5 2H4V1.5C4 1.22386 4.22386 1 4.5 1ZM10 3V3.5C10 3.77614 10.2239 4 10.5 4C10.7761 4 11 3.77614 11 3.5V3H12.5C12.7761 3 13 3.22386 13 3.5V5H2V3.5C2 3.22386 2.22386 3 2.5 3H4V3.5C4 3.77614 4.22386 4 4.5 4C4.77614 4 5 3.77614 5 3.5V3H10ZM2 6V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H2ZM7 7.5C7 7.22386 7.22386 7 7.5 7C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8C7.22386 8 7 7.77614 7 7.5ZM9.5 7C9.22386 7 9 7.22386 9 7.5C9 7.77614 9.22386 8 9.5 8C9.77614 8 10 7.77614 10 7.5C10 7.22386 9.77614 7 9.5 7ZM11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5C12 7.77614 11.7761 8 11.5 8C11.2239 8 11 7.77614 11 7.5ZM11.5 9C11.2239 9 11 9.22386 11 9.5C11 9.77614 11.2239 10 11.5 10C11.7761 10 12 9.77614 12 9.5C12 9.22386 11.7761 9 11.5 9ZM9 9.5C9 9.22386 9.22386 9 9.5 9C9.77614 9 10 9.22386 10 9.5C10 9.77614 9.77614 10 9.5 10C9.22386 10 9 9.77614 9 9.5ZM7.5 9C7.22386 9 7 9.22386 7 9.5C7 9.77614 7.22386 10 7.5 10C7.77614 10 8 9.77614 8 9.5C8 9.22386 7.77614 9 7.5 9ZM5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10C5.22386 10 5 9.77614 5 9.5ZM3.5 9C3.22386 9 3 9.22386 3 9.5C3 9.77614 3.22386 10 3.5 10C3.77614 10 4 9.77614 4 9.5C4 9.22386 3.77614 9 3.5 9ZM3 11.5C3 11.2239 3.22386 11 3.5 11C3.77614 11 4 11.2239 4 11.5C4 11.7761 3.77614 12 3.5 12C3.22386 12 3 11.7761 3 11.5ZM5.5 11C5.22386 11 5 11.2239 5 11.5C5 11.7761 5.22386 12 5.5 12C5.77614 12 6 11.7761 6 11.5C6 11.2239 5.77614 11 5.5 11ZM7 11.5C7 11.2239 7.22386 11 7.5 11C7.77614 11 8 11.2239 8 11.5C8 11.7761 7.77614 12 7.5 12C7.22386 12 7 11.7761 7 11.5ZM9.5 11C9.22386 11 9 11.2239 9 11.5C9 11.7761 9.22386 12 9.5 12C9.77614 12 10 11.7761 10 11.5C10 11.2239 9.77614 11 9.5 11Z10:{"id":"프로젝트-설명","depth":1,"text":"프로젝트 설명"}
11:{"id":"배경","depth":1,"text":"배경"}
12:{"id":"과정","depth":1,"text":"과정"}
13:{"id":"base-이미지-선택","depth":2,"text":"Base 이미지 선택"}
14:{"id":"볼륨-설정","depth":2,"text":"볼륨 설정"}
15:{"id":"acme-challenge-용-디렉토리-생성","depth":2,"text":"ACME Challenge 용 디렉토리 생성"}
16:{"id":"http-요청-처리용-설정-파일-복사","depth":2,"text":"HTTP 요청 처리용 설정 파일 복사"}
17:{"id":"자동화-스크립트-복사","depth":2,"text":"자동화 스크립트 복사"}
18:{"id":"배운-점","depth":1,"text":"배운 점"}
19:{"id":"run-명령어는-빌드-시점에-실행된다","depth":2,"text":"RUN 명령어는 빌드 시점에 실행된다."}
1a:{"id":"이미지-빌드","depth":2,"text":"이미지 빌드"}
f:["$10","$11","$12","$13","$14","$15","$16","$17","$18","$19","$1a"]
1c:["slug","projects/nginx-certbot","c"]
0:["lMTX98RBveplY1vI11IkL",[[["",{"children":["posts",{"children":[["slug","projects/nginx-certbot","c"],{"children":["__PAGE__?{\"slug\":[\"projects\",\"nginx-certbot\"]}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["slug","projects/nginx-certbot","c"],{"children":["__PAGE__",{},[["$L1",[["$","div",null,{"className":"sticky top-0 z-50 h-12 flex flex-row items-center justify-center xl:hidden border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60","children":["$","div",null,{"className":"w-full px-4 flex flex-row items-center justify-between","children":[["$","$L2",null,{"children":[["$","$L3",null,{"children":["$","span",null,{"className":"text-xs leading-normal flex flex-row items-center px-2 py-2 rounded-md hover:bg-accent/50","children":[["$","svg",null,{"width":"15","height":"15","viewBox":"0 0 15 15","fill":"none","xmlns":"http://www.w3.org/2000/svg","className":"mr-2 size-4","children":["$","path",null,{"d":"$4","fill":"currentColor","fillRule":"evenodd","clipRule":"evenodd"}]}],"Related Posts"]}]}],["$","$L5",null,{"align":"start","sideOffset":14,"className":"max-h-[calc(100vh-190px)] overflow-y-auto","children":["$","$L6",null,{"posts":[{"title":"nginx & Certbot","slug":{"full":"projects/nginx-certbot","arr":["projects","nginx-certbot"]}}]}]}]]}],["$","$L2",null,{"children":[["$","$L3",null,{"className":"block lg:hidden","children":["$","span",null,{"className":"text-xs leading-normal flex flex-row items-center px-2 py-2 rounded-md hover:bg-accent/50","children":[["$","svg",null,{"width":"15","height":"15","viewBox":"0 0 15 15","fill":"none","xmlns":"http://www.w3.org/2000/svg","className":"mr-2 size-4","children":["$","path",null,{"d":"M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H7.5C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H10.5C10.7761 10 11 10.2239 11 10.5C11 10.7761 10.7761 11 10.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z","fill":"currentColor","fillRule":"evenodd","clipRule":"evenodd"}]}],"On this page"]}]}],["$","$L5",null,{"align":"end","sideOffset":14,"className":"max-h-[calc(100vh-190px)] overflow-y-auto","children":["$","$L7",null,{"items":[{"id":"프로젝트-설명","depth":1,"text":"프로젝트 설명"},{"id":"배경","depth":1,"text":"배경"},{"id":"과정","depth":1,"text":"과정"},{"id":"base-이미지-선택","depth":2,"text":"Base 이미지 선택"},{"id":"볼륨-설정","depth":2,"text":"볼륨 설정"},{"id":"acme-challenge-용-디렉토리-생성","depth":2,"text":"ACME Challenge 용 디렉토리 생성"},{"id":"http-요청-처리용-설정-파일-복사","depth":2,"text":"HTTP 요청 처리용 설정 파일 복사"},{"id":"자동화-스크립트-복사","depth":2,"text":"자동화 스크립트 복사"},{"id":"배운-점","depth":1,"text":"배운 점"},{"id":"run-명령어는-빌드-시점에-실행된다","depth":2,"text":"RUN 명령어는 빌드 시점에 실행된다."},{"id":"이미지-빌드","depth":2,"text":"이미지 빌드"}]}]}]]}]]}]}],["$","div",null,{"className":"flex flex-row items-start justify-between","children":[["$","aside",null,{"className":"sticky top-0 max-h-screen w-full max-w-72 hidden xl:flex p-4 mr-2 mt-12 mb-12 z-30","children":["$","$L6",null,{"posts":"$8"}]}],["$","article",null,{"id":"post","className":"w-full flex-1 max-w-2xl px-4 mt-12 xl:mt-16 mb-16","children":[["$","div",null,{"className":"flex flex-row items-center justify-center space-x-2 text-xs text-muted-foreground/60 mb-2","children":[["$","svg",null,{"width":"15","height":"15","viewBox":"0 0 15 15","fill":"none","xmlns":"http://www.w3.org/2000/svg","className":"size-3","children":["$","path",null,{"d":"$c","fill":"currentColor","fillRule":"evenodd","clipRule":"evenodd"}]}],["$","span",null,{"children":"August 2nd, 2024"}]]}],["$","div",null,{"className":"font-black text-4xl mb-4 text-center","children":"nginx & Certbot"}],["$","div",null,{"className":"flex flex-row flex-wrap items-center justify-center gap-2 text-xs text-muted-foreground mb-24 xl:mb-16","children":[["$","span","tag_nginx",{"className":"px-2 py-1 rounded-md bg-muted","children":"nginx"}],["$","span","tag_docker",{"className":"px-2 py-1 rounded-md bg-muted","children":"docker"}],["$","span","tag_certbot",{"className":"px-2 py-1 rounded-md bg-muted","children":"certbot"}]]}],["$","$Ld",null,{"text":"https://galacsh.io/posts/projects/nginx-certbot","className":"fixed bottom-4 right-16 z-40"}],[["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["$","strong","strong-0",{"children":["GitHub Repository: ",["$","a",null,{"className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","href":"https://github.com/Galacsh/nginx-certbot-np","target":"_blank","rel":"noopener noreferrer","children":"nginx-certbot-np"}]]}]}],"\n",["$","h1",null,{"className":"text-[1.8rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"프로젝트-설명","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#프로젝트-설명","children":"프로젝트 설명"}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":[["$","a",null,{"className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","href":"https://nginx.org/en/","target":"_blank","rel":"noopener noreferrer","children":"nginx"}]," + ",["$","a",null,{"className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","href":"https://certbot.eff.org/","target":"_blank","rel":"noopener noreferrer","children":"Certbot"}]," 구성을  조금 더 간편하게 처리할 수 있도록 하나의 컨테이너에 자동화 구성을 해놓은 Docker 이미지입니다."]}],"\n",["$","h1",null,{"className":"text-[1.8rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"배경","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#배경","children":"배경"}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["간단한 토이 웹 서비스를 만드는 과정에서, ",["$","a",null,{"className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","href":"https://hub.docker.com/_/nginx","target":"_blank","rel":"noopener noreferrer","children":"nginx"}]," + ",["$","a",null,{"className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","href":"https://hub.docker.com/r/certbot/certbot","target":"_blank","rel":"noopener noreferrer","children":"Certbot"}],"로 HTTPS 프로토콜을 지원하기 위해 관련하여 약간의 검색을 해봤을 때, 대다수의 글은 nginx 이미지와 Certbot 이미지를 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"compose"}]," 기능으로 각각 실행하여 구성하는 글이 대부분이었습니다."]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":"구성을 좀 더 간편하게 진행할 수 있도록 Boilerplate 프로젝트도 존재했고 사실 그냥 사용해도 무방했지만, 몇가지 마음에 들지 않는 점이 있었습니다."}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":["도메인 구성 변경 시 초기화 스크립트(",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"init-letsencrypt.sh"}],")를 재실행하는 것을 잊으면 안됨"]}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"인증서 renewal 시 즉각적으로 nginx를 reload 하지 않음"}],"\n"]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["사실 큰 문제는 아니지만, 무엇보다 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"compose.yaml"}]," 파일을 Certbot으로 더 복잡하게 만들고 싶지 않았던 것도 있습니다."]}],"\n",["$","h1",null,{"className":"text-[1.8rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"과정","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#과정","children":"과정"}]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"base-이미지-선택","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#base-이미지-선택","children":"Base 이미지 선택"}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["nginx 와 Certbot 이미지는 각각 실행 시 모두 root 권한으로 실행됩니다.\nroot 권한은 피하고 싶었기 때문에, nginx의 대표 이미지가 아닌 ",["$","a",null,{"className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","href":"https://hub.docker.com/r/nginxinc/nginx-unprivileged","target":"_blank","rel":"noopener noreferrer","children":"nginxinc/nginx-unprivileged"}]," 이미지를 Base 이미지로 잡고 진행하였습니다."]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["태그는 용량 최소화를 위해 ",["$","strong","strong-0",{"children":"stable-alpine"}]," 태그를 선택했고, 추후에도 동일하게 빌드할 수 있도록 버전(3.19, 당시 최신)을 지정하여 진행했습니다."]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-keyword","children":"FROM"}]," nginxinc/nginx-unprivileged:stable-alpine3.",["$","span","span-1",{"className":"hljs-number","children":"19"}],"\n"]}]}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["nginx를 Base 이미지로 잡은 뒤, Certbot의 경우에는 Certbot 이미지에서 복사해올까 하다가, 어떤 파일들을 복사해야 할지 고민하는 것보다는 그냥 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"apk"}]," 패키지 매니저로 설치하는 방법을 택했습니다. 설치 시에는 root 유저를 사용하였습니다."]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-comment","children":"# Install Certbot"}],"\n",["$","span","span-1",{"className":"hljs-keyword","children":"USER"}]," root\n",["$","span","span-2",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-3",{"className":"bash","children":[" apk add --no-cache ",["$","span","span-0",{"className":"hljs-string","children":"\"certbot\""}]," ",["$","span","span-1",{"className":"hljs-string","children":"\"openssl\""}]]}],"\n"]}]}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":[["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"openssl"}],"은 추후 DH(디피 헬만) 파라미터 생성을 위해 함께 설치했습니다."]}],"\n",["$","blockquote",null,{"className":"pl-[1em] text-foreground/60 border-l-4 border-l-foreground/20 mb-6","children":["\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":[["$","$Le",null,{"href":"/posts/web/ssl-dhparam","className":"font-medium text-active hover:text-active-foreground underline underline-offset-2","children":"DH Parameter 에 관한 설명"}],"은 여기를 참고하세요."]}],"\n"]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"볼륨-설정","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#볼륨-설정","children":"볼륨 설정"}]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-keyword","children":"ARG"}]," nonroot=nginx\n\n",["$","span","span-1",{"className":"hljs-comment","children":"# Volume 명시"}],"\n",["$","span","span-2",{"className":"hljs-keyword","children":"VOLUME"}],["$","span","span-3",{"className":"bash","children":[" [ ",["$","span","span-0",{"className":"hljs-string","children":"\"/etc/letsencrypt\""}],", ",["$","span","span-1",{"className":"hljs-string","children":"\"/var/lib/letsencrypt\""}],", ",["$","span","span-2",{"className":"hljs-string","children":"\"/usr/share/nginx/html\""}]," ]"]}],"\n\n",["$","span","span-4",{"className":"hljs-comment","children":"# 인증서와 기타 데이터가 저장될 디렉토리"}],"\n",["$","span","span-5",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-6",{"className":"bash","children":[" ",["$","span","span-0",{"className":"hljs-built_in","children":"mkdir"}]," -p /etc/letsencrypt ; \\\n  ",["$","span","span-1",{"className":"hljs-built_in","children":"chown"}]," -R ",["$","span","span-2",{"className":"hljs-variable","children":"$$nonroot"}],":",["$","span","span-3",{"className":"hljs-variable","children":"$$nonroot"}]," /etc/letsencrypt"]}],"\n",["$","span","span-7",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-8",{"className":"bash","children":[" ",["$","span","span-0",{"className":"hljs-built_in","children":"mkdir"}]," -p /var/lib/letsencrypt ; \\\n  ",["$","span","span-1",{"className":"hljs-built_in","children":"chown"}]," -R ",["$","span","span-2",{"className":"hljs-variable","children":"$$nonroot"}],":",["$","span","span-3",{"className":"hljs-variable","children":"$$nonroot"}]," /var/lib/letsencrypt"]}],"\n",["$","span","span-9",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-10",{"className":"bash","children":[" ",["$","span","span-0",{"className":"hljs-built_in","children":"mkdir"}]," -p /var/log/letsencrypt ; \\\n  ",["$","span","span-1",{"className":"hljs-built_in","children":"chown"}]," -R ",["$","span","span-2",{"className":"hljs-variable","children":"$$nonroot"}],":",["$","span","span-3",{"className":"hljs-variable","children":"$$nonroot"}]," /var/log/letsencrypt"]}],"\n"]}]}]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"acme-challenge-용-디렉토리-생성","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#acme-challenge-용-디렉토리-생성","children":"ACME Challenge 용 디렉토리 생성"}]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-comment","children":"# For ACME challenge."}],"\n",["$","span","span-1",{"className":"hljs-comment","children":"# This directory does not need to be persistent."}],"\n",["$","span","span-2",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-3",{"className":"bash","children":[" ",["$","span","span-0",{"className":"hljs-built_in","children":"mkdir"}]," -p /acme-challenge ; \\\n  ",["$","span","span-1",{"className":"hljs-built_in","children":"chown"}]," -R ",["$","span","span-2",{"className":"hljs-variable","children":"$$nonroot"}],":",["$","span","span-3",{"className":"hljs-variable","children":"$$nonroot"}]," /acme-challenge ; \\\n  ",["$","span","span-4",{"className":"hljs-built_in","children":"chmod"}]," -R 755 /acme-challenge"]}],"\n"]}]}]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"http-요청-처리용-설정-파일-복사","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#http-요청-처리용-설정-파일-복사","children":"HTTP 요청 처리용 설정 파일 복사"}]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-comment","children":"# Default conf file that does:"}],"\n",["$","span","span-1",{"className":"hljs-comment","children":"#   - HTTP to HTTPS redirection"}],"\n",["$","span","span-2",{"className":"hljs-comment","children":"#   - ACME challenge"}],"\n",["$","span","span-3",{"className":"hljs-keyword","children":"COPY"}],["$","span","span-4",{"className":"bash","children":[" --",["$","span","span-0",{"className":"hljs-built_in","children":"chown"}],"=",["$","span","span-1",{"className":"hljs-variable","children":"$$nonroot"}],":",["$","span","span-2",{"className":"hljs-variable","children":"$$nonroot"}]," ./conf.d/http-default.conf /etc/nginx/conf.d/http-default.conf"]}],"\n"]}]}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["위 파일 (",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"http-default.conf"}],") 은 다음과 같이 구성했습니다."]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-nginx font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-section","children":"server"}]," {\n    ",["$","span","span-1",{"className":"hljs-attribute","children":"listen"}],"      ",["$","span","span-2",{"className":"hljs-number","children":"80"}],";\n    ",["$","span","span-3",{"className":"hljs-attribute","children":"listen"}],"      [::]:",["$","span","span-4",{"className":"hljs-number","children":"80"}],";\n    ",["$","span","span-5",{"className":"hljs-attribute","children":"server_name"}]," _;\n\n    ",["$","span","span-6",{"className":"hljs-section","children":"location"}]," /.well-known/acme-challenge {\n        ",["$","span","span-7",{"className":"hljs-attribute","children":"root"}]," /acme-challenge/;\n    }\n\n    ",["$","span","span-8",{"className":"hljs-section","children":"location"}]," / {\n        ",["$","span","span-9",{"className":"hljs-attribute","children":"return"}]," ",["$","span","span-10",{"className":"hljs-number","children":"301"}]," https://",["$","span","span-11",{"className":"hljs-variable","children":"$$host"}],["$","span","span-12",{"className":"hljs-variable","children":"$$request_uri"}],";\n    }\n}\n"]}]}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":"위와 더불어 Certbot - nginx 플러그인 이용 시 설정해주는 보안을 위한 설정 파일도 같이 복사되게끔 처리했습니다."}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-comment","children":"# options-ssl-nginx.conf for a secure configuration"}],"\n",["$","span","span-1",{"className":"hljs-comment","children":"# https://raw.githubusercontent.com/certbot/certbot/master/certbot-nginx/certbot_nginx/_internal/tls_configs/options-ssl-nginx.conf"}],"\n",["$","span","span-2",{"className":"hljs-keyword","children":"COPY"}],["$","span","span-3",{"className":"bash","children":[" --",["$","span","span-0",{"className":"hljs-built_in","children":"chown"}],"=",["$","span","span-1",{"className":"hljs-variable","children":"$$nonroot"}],":",["$","span","span-2",{"className":"hljs-variable","children":"$$nonroot"}]," ./options-ssl-nginx.conf /etc/letsencrypt/options-ssl-nginx.conf"]}],"\n"]}]}]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"자동화-스크립트-복사","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#자동화-스크립트-복사","children":"자동화 스크립트 복사"}]}],"\n",["$","div",null,{"className":"code-block px-4 mb-6 border rounded-md","children":["$","pre",null,{"className":"font-mono font-semibold text-sm leading-normal py-4 overflow-auto","children":["$","code",null,{"className":"hljs language-dockerfile font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":[["$","span","span-0",{"className":"hljs-keyword","children":"COPY"}],["$","span","span-1",{"className":"bash","children":" scripts /scripts"}],"\n",["$","span","span-2",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-3",{"className":"bash","children":[" ",["$","span","span-0",{"className":"hljs-built_in","children":"chmod"}]," +x /scripts/*.sh"]}],"\n",["$","span","span-4",{"className":"hljs-keyword","children":"COPY"}],["$","span","span-5",{"className":"bash","children":" entrypoint.sh /entrypoint.sh"}],"\n",["$","span","span-6",{"className":"hljs-keyword","children":"RUN"}],["$","span","span-7",{"className":"bash","children":[" ",["$","span","span-0",{"className":"hljs-built_in","children":"chmod"}]," +x /entrypoint.sh"]}],"\n\n",["$","span","span-8",{"className":"hljs-keyword","children":"USER"}]," $nonroot\n",["$","span","span-9",{"className":"hljs-keyword","children":"ENTRYPOINT"}],["$","span","span-10",{"className":"bash","children":[" [ ",["$","span","span-0",{"className":"hljs-string","children":"\"/entrypoint.sh\""}]," ]"]}],"\n",["$","span","span-11",{"className":"hljs-keyword","children":"CMD"}],["$","span","span-12",{"className":"bash","children":[" [ ",["$","span","span-0",{"className":"hljs-string","children":"\"nginx\""}],", ",["$","span","span-1",{"className":"hljs-string","children":"\"-g\""}],", ",["$","span","span-2",{"className":"hljs-string","children":"\"daemon off;\""}]," ]"]}],"\n"]}]}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":[["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"entrypoint.sh"}]," 파일은 이미지의 ENTRYPOINT로 지정되며, nginx 이미지의 기본 ENTRYPOINT인 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"/docker-entrypoint.sh"}]," 실행 및 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"/scripts/*.sh"}]," 실행을 담당합니다."]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":"각 자동화 스크립트의 세부 동작은 GitHub Repository에서 확인 가능하나, 각각의 역할은 다음과 같습니다."}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":[["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"/scripts/setup-dhparam.sh"}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"DH 파라미터가 존재하지 않는 경우 미리 생성해둡니다."}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":[["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"/scripts/obtain-cert.sh"}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"SSL 인증서가 존재하지 않는 도메인의 인증서를 발급합니다."}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"단, 컨테이너 실행 시 최초 1회 실행됩니다. 즉, 도메인 구성 변경 시 재실행이 필요합니다."}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":[["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"/scripts/reload-nginx.sh"}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"nginx를 재실행합니다."}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"인증서 갱신 시 hook으로 자동 실행됩니다."}],"\n"]}],"\n"]}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":[["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"/scripts/renew-cert.sh"}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"일정한 주기로 인증서 갱신을 시도합니다."}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":["갱신 시 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"reload-nginx.sh"}]," 스크립트를 실행합니다."]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h1",null,{"className":"text-[1.8rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"배운-점","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#배운-점","children":"배운 점"}]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"run-명령어는-빌드-시점에-실행된다","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#run-명령어는-빌드-시점에-실행된다","children":"RUN 명령어는 빌드 시점에 실행된다."}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["지금이야 헷갈려하지 않지만, 초반에는 Dockerfile의 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"RUN"}]," 명령어가 컨테이너가 올라올 때 실행되는 것으로 자꾸 착각하여 원하는 결과물을 뽑아내지 못했습니다."]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["Dockerfile의 핵심은 ",["$","strong","strong-0",{"children":"프로그램이 실행되기 위한 \"환경\"을 코드로 작성하는 것"}],"이라는 것을 다시금 되새겨봅니다."]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":"ex:"}],"\n",["$","ul",null,{"className":"list-disc has-[button]:list-none ps-[2em] mb-4 [&_&]:mb-0","children":["\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"Base 이미지 지정"}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"디렉토리 생성 및 권한 부여"}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"의존성 파일들 복사"}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"사용자 및 작업 디렉토리 지정"}],"\n",["$","li",null,{"className":"break-words [&>p]:my-4 [&+&]:mt-[0.25em] [&_&]:mt-[0.25em]","children":"등"}],"\n"]}],"\n",["$","h2",null,{"className":"text-[1.4rem] leading-tight font-extrabold mt-12 mb-6 [h1+&]:mt-6 [h2+&]:mt-6 [h3+&]:mt-6 [h4+&]:mt-6 [h5+&]:mt-6 [h6+&]:mt-6","id":"이미지-빌드","children":["$","a",null,{"className":"underline-offset-2 hover:underline","href":"#이미지-빌드","children":"이미지 빌드"}]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["처음에는 제 맥북에서 빌드한 이미지가 어떤 호스트(OS, 아키텍쳐)에서든 동작할 것이라고 생각했습니다. 하지만 아니었습니다. 제 맥북으로는 기본적으로 ",["$","strong","strong-0",{"children":"arm64"}],"로 빌드되기 때문에, 다른 플랫폼에서는 사용이 되지 않습니다."]}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":"윈도우에서는 WSL2가 필요한 것처럼 사실 당연한건데 여태 이미지를 Pull 받아 사용하기만 하다보니 잠시 잊었습니다."}],"\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":["따라서 Docker의 buildx 기능을 통해 ",["$","code",null,{"className":"font-mono font-medium text-active break-words text-[85%] [pre_&]:text-sm leading-normal px-[0.4em] py-[0.2em] [pre_&]:p-0 rounded-md [pre_&]:rounded-none","children":"arm64, amd64, arm/v6"}],"를 지원하게끔 처리했습니다."]}],"\n",["$","blockquote",null,{"className":"pl-[1em] text-foreground/60 border-l-4 border-l-foreground/20 mb-6","children":["\n",["$","p",null,{"className":"mb-6 break-words break-keep leading-8","children":"\bCertbot 이미지를 참고했을 때 위 3개의 플랫폼만을 지원했고, 이는 이유가 있을 것으로 판단해서 위 3개의 플랫폼만 지정했습니다."}],"\n"]}]]]}],["$","aside",null,{"className":"sticky top-12 xl:top-0 max-h-[calc(100vh-3rem)] xl:max-h-screen w-full max-w-72 hidden lg:flex p-4 ml-2 mt-8 xl:mt-12 mb-12 z-30","children":["$","$L7",null,{"items":"$f"}]}]]}]]],null],null]},["$","$L1b",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$1c","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L1d",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/25f93c550aaf4989.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L1b",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L1d",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"ko","suppressHydrationWarning":true,"className":"__variable_46aac9 __variable_f3ef5f","children":[["$","body",null,{"className":"selection:bg-active/30","children":["$","$L1e",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"disableTransitionOnChange":true,"children":[["$","div",null,{"vaul-drawer-wrapper":"","className":"flex flex-col min-h-full","children":[["$","$L1f",null,{}],["$","main",null,{"className":"flex-1 container","children":["$","$L1b",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L1d",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"className":"w-full h-[calc(100vh-12rem)] flex flex-col items-center justify-center","children":["$","div",null,{"className":"flex flex-row items-center justify-center","children":[["$","h1",null,{"className":"font-black text-4xl","children":"404"}],["$","div",null,{"className":"w-[1px] h-6 bg-muted-foreground mx-4"}],["$","p",null,{"className":"text-muted-foreground","children":"Page not found."}]]}]}],"notFoundStyles":[],"styles":null}]}],["$","footer",null,{"className":"h-16 w-full flex flex-col items-center justify-center text-foreground/60 border-t border-border","children":[["$","span",null,{"className":"text-xs leading-5","children":["© ","2024"," ","Galacsh"]}],["$","span",null,{"className":"text-xs leading-5","children":"All rights reserved."}]]}]]}],["$","$L20",null,{}],["$","$L21",null,{"className":"fixed bottom-4 right-4 z-40"}]]}]}],["$","$L22",null,{"gaId":"G-0HR866Y002"}]]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1403bd516a5ad90f.css","precedence":"next","crossOrigin":"$undefined"}]],"$L23"]]]]
23:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"nginx & Certbot | Galacsh"}],["$","meta","3",{"name":"description","content":"nginx와 Certbot을 조금 더 간편하게 연동하기 위해 만든 Docker 이미지 프로젝트의 배경과 과정"}],["$","meta","4",{"name":"google-site-verification","content":"cAdoZS7D10cMvqzHphlKCRYBFngAkTHiWSf1pQDNrb8"}],["$","meta","5",{"name":"naver-site-verification","content":"f2b89b689efac87b9c27e08958ec1df1be546d94"}],["$","meta","6",{"property":"og:title","content":"nginx & Certbot | Galacsh"}],["$","meta","7",{"property":"og:description","content":"nginx와 Certbot을 조금 더 간편하게 연동하기 위해 만든 Docker 이미지 프로젝트의 배경과 과정"}],["$","meta","8",{"property":"og:image:alt","content":"nginx & Certbot"}],["$","meta","9",{"property":"og:image:type","content":"image/png"}],["$","meta","10",{"property":"og:image:width","content":"1200"}],["$","meta","11",{"property":"og:image:height","content":"630"}],["$","meta","12",{"property":"og:image","content":"https://galacsh.io/og/posts/projects/nginx-certbot"}],["$","meta","13",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","14",{"name":"twitter:title","content":"nginx & Certbot | Galacsh"}],["$","meta","15",{"name":"twitter:description","content":"nginx와 Certbot을 조금 더 간편하게 연동하기 위해 만든 Docker 이미지 프로젝트의 배경과 과정"}],["$","meta","16",{"name":"twitter:image:alt","content":"nginx & Certbot"}],["$","meta","17",{"name":"twitter:image:type","content":"image/png"}],["$","meta","18",{"name":"twitter:image:width","content":"1200"}],["$","meta","19",{"name":"twitter:image:height","content":"630"}],["$","meta","20",{"name":"twitter:image","content":"https://galacsh.io/og/posts/projects/nginx-certbot"}],["$","link","21",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","link","22",{"rel":"icon","href":"/icon.png?0f98980bd13f6cf3","type":"image/png","sizes":"192x192"}],["$","link","23",{"rel":"apple-touch-icon","href":"/apple-icon.png?a86cdd933ec8e70c","type":"image/png","sizes":"180x180"}],["$","meta","24",{"name":"next-size-adjust"}]]
1:null
